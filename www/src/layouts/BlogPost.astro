---
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import FormattedDate from '../components/FormattedDate.astro';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<html lang="en">
	<head>
		<BaseHead title={title} description={description} />
	</head>

	<body class="min-h-screen bg-background">
		<Header />
		<main class="container mx-auto px-4 py-8 max-w-4xl">
			<article class="prose prose-lg max-w-none">
				<!-- Hero Image -->
				{heroImage && (
					<div class="not-prose mb-8">
						<div class="aspect-video overflow-hidden rounded-xl bg-muted">
							<img 
								src={heroImage} 
								alt={title}
								class="object-cover w-full h-full"
							/>
						</div>
					</div>
				)}

				<!-- Article Header -->
				<header class="not-prose mb-8 text-center">
					<div class="flex items-center justify-center space-x-2 text-sm text-muted-foreground mb-4">
						<FormattedDate date={pubDate} />
						{updatedDate && (
							<>
								<span>•</span>
								<span>Updated <FormattedDate date={updatedDate} /></span>
							</>
						)}
						<span>•</span>
						<span>5 min read</span>
					</div>
					
					<h1 class="text-4xl font-bold tracking-tight mb-4 text-foreground">
						{title}
					</h1>
					
					{description && (
						<p class="text-xl text-muted-foreground max-w-2xl mx-auto">
							{description}
						</p>
					)}
					
					<div class="mt-6 pt-6 border-t border-border"></div>
				</header>

				<!-- Article Content -->
				<div class="prose-headings:text-foreground prose-p:text-muted-foreground prose-p:leading-7 prose-a:text-primary prose-a:decoration-primary/30 prose-strong:text-foreground prose-code:text-foreground prose-code:bg-muted prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded-md prose-pre:bg-muted prose-pre:border prose-pre:border-border prose-blockquote:border-l-4 prose-blockquote:border-border prose-blockquote:text-muted-foreground">
					<slot />
				</div>

				<!-- Article Footer -->
				<footer class="not-prose mt-12 pt-8 border-t border-border">
					<div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
						<div class="text-sm text-muted-foreground">
							Published on <FormattedDate date={pubDate} />
							{updatedDate && (
								<span class="block sm:inline">
									<span class="hidden sm:inline"> • </span>
									Last updated on <FormattedDate date={updatedDate} />
								</span>
							)}
						</div>
						
						<div class="flex items-center space-x-2">
							<a 
								href="/blog" 
								class="btn btn-secondary text-sm"
							>
								← Back to blog
							</a>
						</div>
					</div>
				</footer>
			</article>
		</main>
		<Footer />
	</body>
</html>